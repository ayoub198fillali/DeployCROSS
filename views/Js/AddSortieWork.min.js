debugCharge&&console.log("(Work)AddSortieWork charged!");let tableDest,thisPage=0,thisOrder=-1,thisNumPages=10,thisSearch;function GETSorties(e=!1){if(0==window.sessionStorage.validatioNbSorties||e){{const t=new XMLHttpRequest;t.onload=function(){debugUpdates&&console.log("GETSorties onload "),void 0!==tableDest&&tableDest.destroy(),$("#sortiesTable").html(this.responseText),tableDest=$("#TableOfSorties").DataTable({searchPanes:{initCollapsed:!0},dom:'lfrtip <"bottomExport"B> P',buttons:["copyHtml5","csvHtml5","excelHtml5","pdfHtml5","print"],initComplete:function(){$(".dtsp-panesContainer").off("mouseup").on("mouseup",function(){window.sessionStorage.validatioNbSorties=10})},columnDefs:[{type:"natural-nohtml",targets:0}],order:[[0,"asc"]],oLanguage:{sEmptyTable:"Empty Table"},language:{info:"Affichage de la page _PAGE_ sur _PAGES_",infoFiltered:"(filtrée de _MAX_ entrée)",lengthMenu:"Affichage de _MENU_ entrées",search:"Chercher:  "},paging:!0,ordering:!0,info:!0,autoFill:!0}),-1!=thisOrder&&tableDest.order(thisOrder).draw(),null!=thisSearch&&tableDest.search(thisSearch).draw(),tableDest.page.len(thisNumPages).draw(),tableDest.page(thisPage).draw("page")},t.open("GET","views/Php/AddSortie/GETSorties.php"),t.send()}$("#TableOfSorties").off("page.dt").on("page.dt",function(){setTimeout(function(){debugListners&&console.log("$$$L Page Sorties"),thisPage=tableDest.page.info().page},10)}),$("#TableOfSorties th").off("click").on("click",function(){setTimeout(function(){debugListners&&console.log("$$$L Sort Sorties"),thisOrder=tableDest.order(),thisPage=0},10)}),$("#TableOfSorties").off("length.dt").on("length.dt",function(){thisNumPages=tableDest.page.len()}),$("#TableOfSorties").off("search.dt").on("search.dt",function(){setTimeout(function(){""!=(thisSearch=tableDest.search())&&(thisPage=0)},10)}),setTimeout(function(){$("#TableOfSorties_length select , #TableOfSorties_filter input").off("focus").on("focus",function(){debugListners&&console.log("$$$L focus search Sortie"),window.sessionStorage.validatioNbSorties++})},200),setTimeout(function(){$("#TableOfSorties_length select , #TableOfSorties_filter input").off("blur").on("blur",function(){debugListners&&console.log("$$$L  blur search AddSortie"),window.sessionStorage.validatioNbSorties--})},200)}else debugUpdates&&console.log("skip GETSorties")}function deleteTest(e){e.stopPropagation(),window.sessionStorage.validatioNbSorties++;e=$(this).data("testid");$("#delete-"+e).addClass("hidden"),$("#save-"+e).addClass("hidden"),$("#cancel-"+e).removeClass("hidden"),$("#confirm-"+e).removeClass("hidden")}function cancelDeletion(e){e.stopPropagation(),window.sessionStorage.validatioNbSorties--;e=$(this).data("testid");$("#delete-"+e).removeClass("hidden"),$("#save-"+e).removeClass("hidden"),$("#cancel-"+e).addClass("hidden"),$("#confirm-"+e).addClass("hidden")}function confirmDeletion(e){e.stopPropagation(),window.sessionStorage.validatioNbSorties--;e=$(this).data("testid");let t=$(".test-row-"+e);deleteSorties(""+e),t.remove(),tableDest.row(t).remove()}function editResult(){debug&&console.log("Stop Update => editResult"),clearInterval(intervalGlobalSorties);let e=$(this).data("testid"),t=$(this).html();var o=this.id.split("-",1);let s;switch(o[0]){case"Nom":case"SecteurEvolution":s='type= "Text" minlength="1" maxlength="25" ';break;case"Duree":s='type= "number" step="any" min="0" max="9999"';break;case"Observations":s='type= "text" minlength="1" maxlength="25"';break;case"DPT":s='type= "number" min="0" max="999"';break;case"HeureDebut":s='type="text" pattern="^(?:0\\d[0-5]\\d|1\\d[0-5]\\d|2[0-2][0-5]\\d|23[0-5]\\d|2359)" title="Format => HHMM" minlength="1" maxlength="4" required';break;case"HeureSortie":s='type="text" pattern="^(?:0\\d[0-5]\\d|1\\d[0-5]\\d|2[0-2][0-5]\\d|23[0-5]\\d|2359)" title="Format => HHMM" minlength="1" maxlength="4"'}$(this).unbind(),$(this).replaceWith(`<td><input class="${o} inputControl form-control" data-testid="${e}" ${s} value="${t.trim()}"></td>`),$("."+o).off("keyup").on("keyup",function(){$("#save-"+e).removeClass("disabled")}),$("."+o).off("change").on("change",function(){$("#save-"+e).removeClass("disabled")})}function saveUpdate(){var s=$(this).data("testid");let o=!0;if($(`input[data-testid='${s}']`).each(function(e,t){t.reportValidity()||(o=!1)}),o){let e=$(".test-row-"+s),t=($("#save-"+s).addClass("disabled"),e.css("opacity","0.5"),$(`input[data-testid='${s}'],td[data-testid='${s}']`).toArray()),o=(t.splice(0,2),[]);for(const i of t)"INPUT"===i.tagName?o.push(i.value):"TD"===i.tagName&&o.push(i.innerText);debug&&console.log(o),updateSorties(s,o),setTimeout(function(){e.css("opacity","1"),FintervalGlobalSorties(),GETSorties(!0)},1e3)}}function deleteSorties(e){const t=new XMLHttpRequest;t.onload=function(){debug&&console.log("deleteSorties onload "+e)},t.open("GET","views/Php/AddSortie/sortiesDelete.php?theID="+e),t.send()}function updateSorties(e,t){const o=new XMLHttpRequest;o.onload=function(){debug&&console.log("updateSorties onload "+e)},o.open("GET",`views/Php/AddSortie/sortiesUpdate.php?theID=${e}&DATA=`+t.join("-")),o.send()}$(document).on("submit","#formSorties",function(e){e.preventDefault();const t=new XMLHttpRequest;t.onload=function(){document.getElementById("formSorties").reset(),myNotif("success","Sortie ajoutée avec succès",2e3),GETSorties()},debug&&console.log($("#formSorties").serialize()),t.open("GET","views/Php/AddSortie/sortiesSetData.php?"+$(this).serialize()),t.send()});