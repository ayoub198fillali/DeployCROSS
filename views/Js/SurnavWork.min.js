debugCharge&&console.log("(Work)SurnavWork charged!");let tableDestNavireSurnav,tableDestEventsSurnav,thisIdSurnavToRestore,IEQofficierDePermananceSurnav,IEQchefDeQuartSurnav,IEQadjointDeQuartSurnav,TOLtypeDoperationSurnav,TOLsemaphoreSurnav,CHRONOaddActionSurnav,TOLsecteurSurnav,LISTpavillonSurnav;function ConfigUpdateAllListsSurnav(){$.ajax({type:"GET",dataType:"text",url:"views/Php/Surnav/GETAllLists.php",success:function(e){let n=e.split(";!;");IEQofficierDePermananceSurnav=n[0].split(","),IEQchefDeQuartSurnav=n[1].split(","),IEQadjointDeQuartSurnav=n[2].split(","),LISTpavillonSurnav=n[3].split(","),TOLtypeDoperationSurnav=n[4].split(","),TOLsemaphoreSurnav=n[6].split(","),(CHRONOaddActionSurnav=n[7].split(",")).pop(),CHRONOaddActionSurnav.unshift(""),TOLsecteurSurnav={"":" "};let t,a;n[5].split(",").map(function(e){t=e.split("!!")[0],a=e.split("!!")[1],null==TOLsecteurSurnav[t]?""!=t.trim()&&(TOLsecteurSurnav[t]=[a]):""!=t.trim()&&TOLsecteurSurnav[t].push(a)})}})}function AllConfigInputSurnav(){ConfigIEQofficierDePermananceSurnav(),ConfigIEQchefDeQuartSurnav(),ConfigIEQadjointDeQuartSurnav(),ConfigLISTpavillonSurnav(),ConfigTOLtypeDoperationSurnav(),ConfigTOLsemaphoreSurnav(),ConfigCHRONOaddActionSurnav(),ConfigTOLsecteurSurnav()}function ConfigIEQofficierDePermananceSurnav(){let n;$("#IEQofficierDePermananceSurnav").each(function(){n="";for(const e of IEQofficierDePermananceSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigIEQchefDeQuartSurnav(){let n;$("#IEQchefDeQuartSurnav").each(function(){n="";for(const e of IEQchefDeQuartSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigIEQadjointDeQuartSurnav(){let n;$("#IEQadjointDeQuartSurnav").each(function(){n="";for(const e of IEQadjointDeQuartSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigLISTpavillonSurnav(){let n;$("#NAVIREpavillonSurnav").each(function(){n="";for(const e of LISTpavillonSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigTOLtypeDoperationSurnav(){let n;$("#TOLtypeDoperationSurnav").each(function(){n="";for(const e of TOLtypeDoperationSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigTOLsemaphoreSurnav(){let n;$("#TOLsemaphoreSurnav").each(function(){n="";for(const e of TOLsemaphoreSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)}),$("#TOLsemaphoreSurnav").off("change").on("change",function(){const e=$($("#TOLsecteurSurnav")[0].options[$("#TOLsecteurSurnav")[0].selectedIndex]).closest("optgroup").prop("label");$("#TOLpointRemarquableSurnav").val(`SEMAPHORE ${$("#TOLsemaphoreSurnav").val()} ( ${e.split(" ").pop()} )  `)})}function ConfigCHRONOaddActionSurnav(){let n;$("#CHRONOaddActionSurnav").each(function(){n="";for(const e of CHRONOaddActionSurnav)n+=`<option>${e}</option>`;$(this).empty().append(n),sortSelect($(this)[0].id)})}function ConfigTOLsecteurSurnav(){let t;var a=Object.keys(TOLsecteurSurnav);for(let n=0;n<a.length;n++){t+=`<optgroup label="${a[n]}">`;for(let e=0;e<TOLsecteurSurnav[a[n]].length;e++)t+=`<option value='${TOLsecteurSurnav[Object.keys(TOLsecteurSurnav)[n]][e]}'>${TOLsecteurSurnav[Object.keys(TOLsecteurSurnav)[n]][e]}</option>`;t+="</optgroup>"}$("#TOLsecteurSurnav").off("change").on("change",function(){const e=$(this.options[this.selectedIndex]).closest("optgroup").prop("label");$("#TOLpointRemarquableSurnav").val(`SEMAPHORE ${$("#TOLsemaphoreSurnav").val()} (${e.split(" ").pop()}) `)}),$("#TOLsecteurSurnav").empty().append(t)}function ConfigSurnav(e=!1){debug&&console.log("*** ConfigSurnav =>"+e),e?AllConfigInputSurnav():(ConfigUpdateAllListsSurnav(),Swal.fire({title:"Update Data From Server !",html:"A Few Milliseconds Please.",timer:600,timerProgressBar:!0,didOpen:()=>{Swal.showLoading()}}).then(()=>{AllConfigInputSurnav(),UpdateSurnavForm(),setTimeout(()=>{configTypeEventSurnav()},500)})),setTimeout(()=>{0==$("#IEQofficierDePermananceSurnav option").length&&ConfigSurnav(!0)},500)}function SetPropsSurnav(){callAllListnerSurnav(),GETNavireSurnav(),ConfigSurnav(),setThisDateSurnav(),setThisDateSurnavUpdate(),GetLastIdSurnav(),GETEventsSurnav()}function setThisDateSurnav(){$("#INFOquartDeSurnav")[0].selectedIndex=parseInt((new Date).toISOString().split("T")[1].split(".")[0].split(":",1))/4,$("#IEQleSurnav").val((new Date).toISOString().split("T")[0]),$("#INFOduSurnav").val((new Date).toISOString().split("T")[0]),$("#INFOaUTCSurnav").val((new Date).toISOString().split("T")[1].split(".")[0].split(":",2).join(":"))}function setThisDateSurnavUpdate(){$("#CHRONOheureUTCSurnav").off("dblclick").on("dblclick",function(){$("#CHRONOheureUTCSurnav").val((new Date).toISOString().split("T")[1].split(".")[0].split(":",2).join(":"))}),$("#CHRONOdateSurnav").off("dblclick").on("dblclick",function(){$("#CHRONOdateSurnav").val((new Date).toISOString().split("T")[0])}),$("#CHRONOheureUTCSurnav").val((new Date).toISOString().split("T")[1].split(".")[0].split(":",2).join(":")),$("#CHRONOdateSurnav").val((new Date).toISOString().split("T")[0])}function GetLastIdSurnav(){if(!window.sessionStorage.updateSurnavForm){const e=new XMLHttpRequest;e.onload=function(){var e=this.responseText.split("/")[0],n=this.responseText.split("/")[1],e=(+e+1).toString().padStart(5,"0");debug&&console.log("Last Id  "+e),"YAC"==$("#NAVIREtypeSurnav").val()&&"MOUILLAGE"==$("#TOLtypeDoperationSurnav").val()||$("#notImportantSurnav").hasClass("notImportantNum")?$("#idSurnav")[0].innerHTML="00000":$("#idSurnav")[0].innerHTML=e,$("#idSurnav")[0].setAttribute("trueid",+n+1)},e.open("GET","views/Php/Surnav/SurnavGetLastId.php?thisdate="+(new Date).toISOString().split("-")[0]),e.send()}}function newGetLastIdSurnav(){if("Update"!=$("#idSurnav")[0].innerHTML.split(" ")[1])GetLastIdSurnav();else if("YAC"==$("#NAVIREtypeSurnav").val()&&"MOUILLAGE"==$("#TOLtypeDoperationSurnav").val()||$("#notImportantSurnav").hasClass("notImportantNum"))$("#idSurnav")[0].innerHTML="00000 Update";else if("00000 Update"==thisIdSurnavToRestore){const e=new XMLHttpRequest;e.onload=function(){var e=this.responseText.split("/")[0];$("#idSurnav")[0].innerHTML=(+e+1).toString().padStart(5,"0")+" Update"},e.open("GET","views/Php/Surnav/SurnavGetLastId.php?thisdate="+(new Date).toISOString().split("-")[0]),e.send()}else $("#idSurnav")[0].innerHTML=thisIdSurnavToRestore}function GETNavireSurnav(e=!0){const n=new XMLHttpRequest;n.onload=function(){debugUpdates&&console.log("GETNavireSurnav onload"),e||tableDestNavireSurnav.destroy(),$("#navireTable").html(this.responseText),tableDestNavireSurnav=$("#NAVIRETableSurnav").DataTable({dom:"lfrtip",language:{info:"Affichage de la page _PAGE_ sur _PAGES_",infoFiltered:"(filtrée de _MAX_ entrée)",lengthMenu:"Affichage de _MENU_ entrées",searchPlaceholder:"Chercher:  ",emptyTable:" "},oSearch:{sSearch:"#xxxxxxxxxx#"},ordering:!0,info:!0,autoFill:!0,responsive:!0}),$("#NAVIRETableSurnav").off("search.dt").on("search.dt",function(){setTimeout(function(){""==tableDestNavireSurnav.search().trim()?$("#navireTable tr").each(function(){$(this).addClass("hidden")}):$("#navireTable tr").each(function(){$(this).removeClass("hidden")})},10)}),$("input[aria-controls=NAVIRETableSurnav]").val(""),tableDestNavireSurnav.search("")},n.open("GET","views/Php/Surnav/GETNavires.php"),n.send()}function copyDataNavireSurnav(){var e=this.id;$("#NAVIREnomSurnav").val($(`#${e} :nth-child(1)`)[0].innerText),$("#NAVIREtypeSurnav").val($(`#${e} :nth-child(2)`)[0].innerText),"YAC"!=$("#NAVIREtypeSurnav").val()||"MOUILLAGE"!=$("#TOLtypeDoperationSurnav").val()?($("#LabelNAVIREprovenance")[0].innerHTML='Provenance : <span style="color:red">*</span>',$("#InputNAVIREprovenance")[0].required=!0,$("#LabelNAVIREdestination")[0].innerHTML='Destination : <span style="color:red">*</span>',$("#InputNAVIREdestination")[0].required=!0,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML='Zone Géographique : <span style="color:red">*</span>',$("#TOLzoneGeographiqueSurnav")[0].required=!0,$("#LabelTOLazimutSurnav")[0].innerHTML='Azimut : <span style="color:red">*</span>',$("#TOLazimutSurnav")[0].required=!0,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML='Point Remarquable (DPT) : <span style="color:red">*</span>',$("#TOLpointRemarquableSurnav")[0].required=!0,$("#LabelTOLdistanceSurnav")[0].innerHTML='Distance (Nq) : <span style="color:red">*</span>',$("#TOLdistanceSurnav")[0].required=!0):($("#LabelNAVIREprovenance")[0].innerHTML="Provenance :",$("#InputNAVIREprovenance")[0].required=!1,$("#LabelNAVIREdestination")[0].innerHTML="Destination :",$("#InputNAVIREdestination")[0].required=!1,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML="Zone Géographique :",$("#TOLzoneGeographiqueSurnav")[0].required=!1,$("#LabelTOLazimutSurnav")[0].innerHTML="Azimut :",$("#TOLazimutSurnav")[0].required=!1,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML="Point Remarquable (DPT) :",$("#TOLpointRemarquableSurnav")[0].required=!1,$("#LabelTOLdistanceSurnav")[0].innerHTML="Distance (Nq) : ",$("#TOLdistanceSurnav")[0].required=!1),$("#NAVIREpavillonSurnav").val($(`#${e} :nth-child(3)`)[0].innerText),$("#NAVIRECSSurnav").val($(`#${e} :nth-child(4)`)[0].innerText),$("#NAVIREMMSISurnav").val($(`#${e} :nth-child(5)`)[0].innerText),$("#NAVIREOMISurnav").val($(`#${e} :nth-child(6)`)[0].innerText),$("#NAVIRElongueurSurnav").val($(`#${e} :nth-child(7)`)[0].innerText),$("#NAVIREjaugeBrutSurnav").val($(`#${e} :nth-child(8)`)[0].innerText),$("#NAVIREnombreEquipagesSurnav").val($(`#${e} :nth-child(9)`)[0].innerText),$("#NAVIRETESurnav").val($(`#${e} :nth-child(10)`)[0].innerText)}function GETEventsSurnav(e=!0){const n=new XMLHttpRequest;n.onload=function(){debugUpdates&&console.log("GETEventsSurnav onload"),e||tableDestEventsSurnav.destroy(),tableDestEventsSurnav=$("#CHRONOtableShowSurnav").DataTable({language:{info:"Affichage de la page _PAGE_ sur _PAGES_",infoFiltered:"(filtrée de _MAX_ entrée)",lengthMenu:"Affichage de _MENU_ entrées",searchPlaceholder:"Chercher:  "},info:!0,autoFill:!0,rowReorder:{snapX:-5},columnDefs:[{orderable:!0,className:"reorder",targets:0},{orderable:!1,targets:"_all"}]})},n.open("GET","n"),n.send()}function deleteTestSurnavEvent(e){e.stopPropagation();e=$(this).data("eventid");$("#delete-Surnav-Event-"+e).addClass("hidden"),$("#cancel-Surnav-Event-"+e).removeClass("hidden"),$("#confirm-Surnav-Event-"+e).removeClass("hidden")}function cancelTestSurnavEvent(e){e.stopPropagation();e=$(this).data("eventid");$("#delete-Surnav-Event-"+e).removeClass("hidden"),$("#cancel-Surnav-Event-"+e).addClass("hidden"),$("#confirm-Surnav-Event-"+e).addClass("hidden")}function confirmTestSurnavEvent(e){e.stopPropagation();e=$(this).data("eventid");let n=$(".Surnav-Evant-row-"+e);n.remove(),tableDestEventsSurnav.row(n).remove()}function callAllListnerSurnav(){addListnerForEventTableSurnav(),addListnerToDetectChangesInFormSurnav(),addListnerForStringSelectToTextAreaSurnav(),showHideSurnav(),menuMotifSurnav(),YACmodifyOblig(),resetSurnavFormTop(),notImportantSurnav(),gotoMapSurnav(),gdhAutoDetectSurnav(),autoCompleteSurnav()}function addListnerToDetectChangesInFormSurnav(){$("#formSurnav :input").change(function(){$("#formSurnav").data("changed",!0)})}function addListnerForEventTableSurnav(){let n=-1;$("#CHRONOaddButtonSurnav").off("click").on("click",function(e){n++,e.preventDefault(),$("#CHRONOdateSurnav")[0].reportValidity()&&$("#CHRONOheureUTCSurnav")[0].reportValidity()&&$("#CHRONOTphVHFSurnav")[0].reportValidity()&&""!=$("#CHRONOtextAreaSurnav")[0].value&&(myNotif("success","Event Added !",2e3),tableDestEventsSurnav.row.add($(`
        <tr class="Surnav-Evant-row-${n} active-row ${n%2?"even":"odd"}">
        <td class="movRow" style="width:40px"> ${Math.floor($("#CHRONOtableShowSurnav tbody tr :not(:has(>td[class=dataTables_empty]))").length/14)}</td>
          <td contenteditable="true" style="width:90px">${$("#CHRONOdateSurnav").val()}</td>
          <td contenteditable="true" style="width:90px">${$("#CHRONOheureUTCSurnav").val()}</td>
          <td contenteditable="true" style="width:70px">${$("#CHRONOTphVHFSurnav").val()}</td>
          <td contenteditable="true"><pre>${$("#CHRONOtextAreaSurnav").val()}</pre></td>

          <td style="width:80px" class="controleTd">
            <span class="btnControl btnControlDelete" data-eventid="${n}" id="delete-Surnav-Event-${n}"><i class="icon-TRASH "></i></span>
            <span class="btnControl btnControlCancel hidden"  data-eventid="${n}" id="cancel-Surnav-Event-${n}"><i class="icon-CLOSE "></i></span>
            <span class="btnControl btnControlConfirm hidden" data-eventid="${n}" id="confirm-Surnav-Event-${n}"><i class="icon-CHECK "></i></span>
          </td>

          <script>
          $('#delete-Surnav-Event-${n}').off('click').on('click', deleteTestSurnavEvent); $('#cancel-Surnav-Event-${n}').on('click', cancelTestSurnavEvent);
          $('#confirm-Surnav-Event-${n}').off('click').on('click', confirmTestSurnavEvent);
          </script>
        <tr>
    `)).draw(),$("#CHRONOtextAreaSurnav")[0].value=""),$("#CHRONOtextAreaSurnav")[0].focus()})}function addListnerForStringSelectToTextAreaSurnav(){$("#CHRONOaddActionSurnav").off("change").on("change",function(){$("#CHRONOtextAreaSurnav")[0].value+=$(this).val()+" ",$("#CHRONOaddActionSurnav")[0].selectedIndex=0,$("#CHRONOtextAreaSurnav")[0].focus()})}function showHideSurnav(){var n=document.querySelectorAll(".FormGrpSurnav .childFormGrp");let t=document.querySelectorAll(".FormGrpSurnav > .title");for(let e=0;e<n.length;e++)t[e].addEventListener("click",()=>{$($(".FormGrpSurnav .childFormGrp")[e]).toggle("slow")})}function menuMotifSurnav(){$("#TOLtypeDoperationSurnav").off("change").on("change",function(){switch(this.value.trim()){case"MOUILLAGE":$("#TOLmotifSurnav").replaceWith(`<select id="TOLmotifSurnav" name="TOLmotif" required>
          <option value='METEO '>METEO </option>
          <option value='ATTENTE D&#039;ENTREE '>ATTENTE D'ENTREE </option>
          <option value='ATTENTE D&#039;ORDRE '>ATTENTE D'ORDRE </option>
          <option value='ESCALE '>ESCALE </option>
          <option value='GRANDE PLAISANCE '>GRANDE PLAISANCE </option>
          <option value='AUTRE '>AUTRE </option>
        </select>`);break;case"DERIVE VOLONTAIRE":$("#TOLmotifSurnav").replaceWith(`<select id="TOLmotifSurnav" name="TOLmotif" required>
            <option value='METEO '>METEO </option>
            <option value='ATTENTE D&#039;ENTREE '>ATTENTE D'ENTREE </option>
            <option value='ATTENTE D&#039;ORDRE '>ATTENTE D'ORDRE </option>
            <option value='AUTRE '>AUTRE </option>
          </select>`);break;default:$("#TOLmotifSurnav").replaceWith('<input id="TOLmotifSurnav" type="text" name="TOLmotif" value="" required/>')}$("#NAVIREtypeSurnav").trigger($.Event("keyup")),newGetLastIdSurnav()})}function YACmodifyOblig(){$("#NAVIREtypeSurnav").off("change paste keyup").on("change paste keyup",function(){this.value=this.value.toUpperCase(),"YAC"!=$("#NAVIREtypeSurnav").val()||"MOUILLAGE"!=$("#TOLtypeDoperationSurnav").val()?(console.log("yes"),$("#LabelNAVIREprovenance")[0].innerHTML='Provenance : <span style="color:red">*</span>',$("#InputNAVIREprovenance")[0].required=!0,$("#LabelNAVIREdestination")[0].innerHTML='Destination : <span style="color:red">*</span>',$("#InputNAVIREdestination")[0].required=!0,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML='Zone Géographique : <span style="color:red">*</span>',$("#TOLzoneGeographiqueSurnav")[0].required=!0,$("#LabelTOLazimutSurnav")[0].innerHTML='Azimut : <span style="color:red">*</span>',$("#TOLazimutSurnav")[0].required=!0,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML='Point Remarquable (DPT) : <span style="color:red">*</span>',$("#TOLpointRemarquableSurnav")[0].required=!0,$("#LabelTOLdistanceSurnav")[0].innerHTML='Distance (Nq) : <span style="color:red">*</span>',$("#TOLdistanceSurnav")[0].required=!0):(console.log("no"),$("#LabelNAVIREprovenance")[0].innerHTML="Provenance :",$("#InputNAVIREprovenance")[0].required=!1,$("#LabelNAVIREdestination")[0].innerHTML="Destination :",$("#InputNAVIREdestination")[0].required=!1,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML="Zone Géographique :",$("#TOLzoneGeographiqueSurnav")[0].required=!1,$("#LabelTOLazimutSurnav")[0].innerHTML="Azimut :",$("#TOLazimutSurnav")[0].required=!1,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML="Point Remarquable (DPT) :",$("#TOLpointRemarquableSurnav")[0].required=!1,$("#LabelTOLdistanceSurnav")[0].innerHTML="Distance (Nq) : ",$("#TOLdistanceSurnav")[0].required=!1),newGetLastIdSurnav()})}function resetSurnavFormTop(){$("#resetSurnavFormTop").off("click").on("click",function(){myNotif("success","Surnav Form Reset !",2e3),$("#formSurnav")[0].reset(),$("#formSurnav").data("changed",!1),tableDestEventsSurnav.rows().remove().draw(),FintervalGlobalLastIdSurnav(),GetLastIdSurnav(),setTimeout(()=>{setThisDateSurnav(),GETNavireSurnav(!1),configTypeEventSurnav()},100)})}function notImportantSurnav(){$("#notImportantSurnav").off("click").on("click",function(){$("#notImportantSurnav").toggleClass("notImportantNum"),newGetLastIdSurnav()})}function gotoMapSurnav(){$("#gotoGoogleMaps").off("click").on("click",function(){if($("#TOLpositionNSurnav")[0].reportValidity()&&$("#TOLpositionESurnav")[0].reportValidity()){let e=$("#TOLpositionNSurnav")[0].value.replace(",","'"),n=$("#TOLpositionESurnav")[0].value.replace(",","'");e=(e=(e=(e=(e=e.slice(0,-1)).replace(/\s/g,"")).replace("°"," ")).replace("'",".")).replace(",","."),n=(n=(n=(n=(n=n.slice(0,-1)).replace(/\s/g,"")).replace("°"," ")).replace("'",".")).replace(",",".");var t=`https://www.google.com/maps/place/${e}+`+n;window.open(t,"_blank")}})}function gdhAutoDetectSurnav(){$("#TOLGDHUTCSurnav").on("dblclick",function(){$("#gdhAutoDetect").click()}),$("#gdhAutoDetect").off("click").on("click",function(){let e=(new Date).toISOString();$("#TOLGDHUTCSurnav").val(e.split("T")[0].split("-")[2]+e.split("T")[0].split("-")[1]+e.split("T")[1].split(":")[0]+e.split("T")[1].split(":")[1])})}function autoCompleteSurnav(){$("#TOLpositionNSurnav , #TOLpositionESurnav").off("keyup").on("keyup",function(e){let n=this.value,t=0;"TOLpositionESurnav"==this.id&&(t=1),"Backspace"!=e.key||n.length!==2+t&&n.length!==5+t&&n.length!==8+t?"Backspace"!=e.key||n.length!==30+t&&n.length!==15+t?(n.length===2+t&&(this.value=n+"°"),n.length===5+t&&(this.value=n+","),n.length===8+t&&(this.value=n+"'")):this.value=n.split("").slice(0,-14).join(""):this.value=n.split("").slice(0,-1).join("")}),$("#TOLazimutSurnav").off("keyup").on("keyup",function(e){let n=this.value;"Backspace"==e.key&&3===n.length?this.value=n.split("").slice(0,-1).join(""):3===n.length&&(this.value=n+"°")}),$("#NAVIRERteVitSurnav").off("keyup").on("keyup",function(e){let n=this.value;"Backspace"==e.key&&4===n.length?this.value=n.split("").slice(0,-2).join(""):3===n.length&&(this.value=n+"°/")})}function configTypeEventSurnav(){switch($("#idEvent")[0].innerHTML="( "+$("select[name=IEQevenement]")[0].value+" )",$("select[name=IEQevenement]")[0].value){case"EN COURS":$("#idEvent").css("color","red");break;case"CLOSE":$("#idEvent").css("color","orange");break;case"ARCHIVÉ":$("#idEvent").css("color","green")}}function UpdateSurnavForm(){window.sessionStorage.updateSurnavFormID&&$.ajax({type:"GET",dataType:"text",url:"views/Php/Surnav/SurnavGetByIdToUpdate.php?ID="+window.sessionStorage.updateSurnavFormID,success:function(e){let n=e.split("!;!")[0].split(",;,"),t=e.split("!;!")[1].split(":;:");n.shift();for(let e=0;e<=7;e++)$("#formSurnav")[0].elements[e].value=n[e];$("#TOLtypeDoperationSurnav").val(n[8]).change();for(let e=9;e<=18;e++)$("#formSurnav")[0].elements[e].value=n[e];for(let e=22;e<=49;e++)$("#formSurnav")[0].elements[e].value=n[e-3];"YAC"!=$("#NAVIREtypeSurnav").val()||"MOUILLAGE"!=$("#TOLtypeDoperationSurnav").val()?($("#LabelNAVIREprovenance")[0].innerHTML='Provenance : <span style="color:red">*</span>',$("#InputNAVIREprovenance")[0].required=!0,$("#LabelNAVIREdestination")[0].innerHTML='Destination : <span style="color:red">*</span>',$("#InputNAVIREdestination")[0].required=!0,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML='Zone Géographique : <span style="color:red">*</span>',$("#TOLzoneGeographiqueSurnav")[0].required=!0,$("#LabelTOLazimutSurnav")[0].innerHTML='Azimut : <span style="color:red">*</span>',$("#TOLazimutSurnav")[0].required=!0,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML='Point Remarquable (DPT) : <span style="color:red">*</span>',$("#TOLpointRemarquableSurnav")[0].required=!0,$("#LabelTOLdistanceSurnav")[0].innerHTML='Distance (Nq) : <span style="color:red">*</span>',$("#TOLdistanceSurnav")[0].required=!0):($("#LabelNAVIREprovenance")[0].innerHTML="Provenance :",$("#InputNAVIREprovenance")[0].required=!1,$("#LabelNAVIREdestination")[0].innerHTML="Destination :",$("#InputNAVIREdestination")[0].required=!1,$("#LabelTOLzoneGeographiqueSurnav")[0].innerHTML="Zone Géographique :",$("#TOLzoneGeographiqueSurnav")[0].required=!1,$("#LabelTOLazimutSurnav")[0].innerHTML="Azimut :",$("#TOLazimutSurnav")[0].required=!1,$("#LabelTOLpointRemarquableSurnav")[0].innerHTML="Point Remarquable (DPT) :",$("#TOLpointRemarquableSurnav")[0].required=!1,$("#LabelTOLdistanceSurnav")[0].innerHTML="Distance (Nq) : ",$("#TOLdistanceSurnav")[0].required=!1),t.map((e,n)=>{""!=e&&tableDestEventsSurnav.row.add($(`
                <tr class="Surnav-Evant-row-${n} active-row ${n%2?"even":"odd"}">
                <td class="movRow" style="width:40px"> ${n} </td>
                  <td contenteditable="true" style="width:90px"> ${e.split(",;,")[0]} </td>
                  <td contenteditable="true" style="width:90px"> ${e.split(",;,")[1]} </td>
                  <td contenteditable="true" style="width:70px"> ${e.split(",;,")[2]} </td>
                  <td contenteditable="true" > ${e.split(",;,")[3]} </td>
          
                  <td style="width:80px" class="controleTd">
                    <span class="btnControl btnControlDelete" data-eventid="${n}" id="delete-Surnav-Event-${n}"><i class="icon-TRASH "></i></span>
                    <span class="btnControl btnControlCancel hidden"  data-eventid="${n}" id="cancel-Surnav-Event-${n}"><i class="icon-CLOSE "></i></span>
                    <span class="btnControl btnControlConfirm hidden" data-eventid="${n}" id="confirm-Surnav-Event-${n}"><i class="icon-CHECK "></i></span>
                  </td>
          
                  <script>
                  $('#delete-Surnav-Event-${n}').off('click').on('click', deleteTestSurnavEvent); 
                  $('#cancel-Surnav-Event-${n}').off('click').on('click', cancelTestSurnavEvent);
                  $('#confirm-Surnav-Event-${n}').off('click').on('click', confirmTestSurnavEvent);
                  </script>
                <tr>
              `)).draw()}),clearInterval(intervalGlobalLastIdSurnav),$("#idSurnav")[0].setAttribute("trueId",window.sessionStorage.updateSurnavFormID),$("#idSurnav")[0].innerHTML=window.sessionStorage.updateSurnavForm,thisIdSurnavToRestore=window.sessionStorage.updateSurnavForm,window.sessionStorage.removeItem("updateSurnavFormID"),window.sessionStorage.removeItem("updateSurnavForm")}})}function resetAllPavillons(){console.log("resetAllPavillons");const e=new XMLHttpRequest;e.onload=function(){console.log(this.responseText)},e.open("GET","views/Php/Setting/PavillonReSetData.php?Delete=1"),e.send(),$("#NAVIREpavillonSurnav > option").each(function(){let e=this.value;if(""!=e){var n=e.split("(")[0],t=(console.log(n),e.split("(")[1].split(")")[0]);console.log(t);const a=new XMLHttpRequest;a.onload=function(){console.log(this.responseText)},a.open("GET",`views/Php/Setting/PavillonReSetData.php?Delete=0&Pavillongrade=${t}&Pavillonname=`+n),a.send()}})}YACmodifyOblig(),$(document).on("submit","#formSurnav",function(e){e.preventDefault();e=$("#idSurnav")[0].getAttribute("trueid");let n=$("#idSurnav")[0].innerHTML.split(" ")[0],t=$("#idSurnav")[0].innerHTML.split(" ")[1];("YAC"==$("#NAVIREtypeSurnav").val()&&"MOUILLAGE"==$("#TOLtypeDoperationSurnav").val()||$("#notImportantSurnav").hasClass("notImportantNum"))&&(n="00000");const a=new XMLHttpRequest;a.onload=function(){var e;if("success"!=this.responseText)throw e="Surnav Form Error !\n"+this.responseText.split("::")[1],myNotif("error",e,2e3),new Error(e);"Update"!=t&&GetLastIdSurnav(),myNotif("success","Surnav Form Success ("+$("#idSurnav")[0].innerHTML.split(" ")[0]+") !",2e3),$("#ResetFormsSurnav")[0].checked&&($("#formSurnav")[0].reset(),$("#formSurnav").data("changed",!1),tableDestEventsSurnav.rows().remove().draw(),FintervalGlobalLastIdSurnav(),GetLastIdSurnav()),setTimeout(()=>{setThisDateSurnav(),GETNavireSurnav(!1)},100)},debug&&console.log($(this).serialize()),tableDestEventsSurnav.column("0:visible").order("asc").draw(),tableDestEventsSurnav.rows().invalidate().draw();let r=tableDestEventsSurnav.rows().data().map(function(e){return e.slice()});r=r.map(e=>(e.shift(),e.pop(),e.join("!,;"))),debug&&(console.log(r),console.log(r.join("        ")),console.log(`views/Php/Surnav/SurnavSetData.php?i=${e}&id=${n}&update=${t}&${$(this).serialize()}&events=${r.join("!;!")}&updateNavire=`+$("#NAVIREUpdateSurnav")[0].checked)),a.open("GET",`views/Php/Surnav/SurnavSetData.php?i=${e}&id=${n}&update=${t}&${$(this).serialize()}&events=${encodeURIComponent(r.join("!;!"))}&updateNavire=`+$("#NAVIREUpdateSurnav")[0].checked),a.send()});